"use strict";(self.webpackChunkliga_soccer=self.webpackChunkliga_soccer||[]).push([[5457],{45457:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var n=s(27937),a=s(2643),o=s(27565),r=s(96529),l=s(780),c=s(95586),i=s(51047),d=s(39442),u=s(91742),h=s(79419),x=s(99236),m=s(23163),p=s.n(m),y=s(93916),b=s.n(y),g=s(21952),j=s(51256),f=s(11030),S=s(43327),C=s(65744),k=s(47514),w=s(21696),A=s(98490),v=s(75633),N=s(26788),T=s(27929);const D=()=>{const[e,t]=(0,o.useState)(""),[s,n]=(0,o.useState)(""),[a,m]=(0,o.useState)([]),[y,D]=(0,o.useState)(0),{width:I}=(0,l.A)(),[F,R]=(0,o.useState)(0),[E,U]=(0,o.useState)(0),[L,W]=(0,o.useState)(0),[_,M]=(0,o.useState)(0),[O,z]=(0,o.useState)(0),[Y,G]=(0,o.useState)(0),[P,B]=(0,o.useState)(0),{USER:V}=(0,h.Z)(),[H,K]=(0,o.useState)(""),[Z,q]=(0,o.useState)(""),[J,Q]=(0,o.useState)(null),[X,$]=(0,o.useState)(null),{handleSubmit:ee}=(0,d.mN)(),[te,se]=(0,o.useState)("0x83d9C5d7...2F4D914D"),[ne,ae]=(0,o.useState)(""),[oe,re]=(0,o.useState)(!1),[le,ce]=(0,o.useState)(),[ie,de]=(0,o.useState)(0),[ue,he]=(0,o.useState)(!0),[xe,me]=(0,o.useState)(1),[pe,ye]=(0,o.useState)(!1),[be,ge]=(0,o.useState)(!1),[je,fe]=(0,o.useState)({}),[Se,Ce]=(0,o.useState)({}),[ke,we]=(0,o.useState)(!1),Ae=(0,f.Zp)(),[ve,Ne]=(0,o.useState)(""),[Te,De]=(0,o.useState)({userName:V.fullname,userEmail:V.email}),[Ie,Fe]=(0,o.useState)({walletAddress:"",amount:0}),[Re,Ee]=(0,o.useState)(!0),Ue=()=>{me(xe+1)};(0,o.useEffect)((()=>{ne&&te&&re(ne===te)}),[ne,te]);(0,o.useEffect)((()=>{V&&V.email&&(async()=>{try{const e=(await x.A.get("http://localhost:3000/User/getbyemail?email=".concat(V.email))).data._id;Ne(e);const t=await x.A.get("http://localhost:3000/Tournament/getByUserId/".concat(e)),s=t.data&&t.data.tournaments?t.data.tournaments:[];console.log("tournament :",s),m(s)}catch(e){console.error("Error fetching tournaments:",e.message)}})()}),[V]);const Le=async()=>{try{const t=a.find((t=>t._id===e)),s=t?t.tournamentType:null;let n;switch(console.log("tournament Type :",s),s){case"Knockout":n="19";break;case"League":n="6";break;case"Championship":n="5";break;default:n=""}if(ie!==n)return void i.oR.error(" Incorrect amount for tournament type ".concat(s,". Expected: ").concat(n));const o={userId:ve,...Ie,tournament:e,payment_status:"unpaid",amount:ie},r=await x.A.post("http://localhost:3000/Payment/createPayment",o);console.log("data cc:",o);const l=!(!r.data||!r.data.addressesMatch)&&r.data.addressesMatch;console.log("data dddd:",l);const c=r.data&&r.data.payment?r.data.payment:null;console.log("payment dddd:",c),oe&&c?(await x.A.put("http://localhost:3000/Payment/".concat(c._id),{payment_status:"paid"}),i.oR.success("Your payment has been processed successfully!"),Ae("/payment/checkout-success"),console.log("payment dddd:",c)):i.oR.error("User and Admin wallet addresses do not match!")}catch(t){console.error("Error during checkout:",t.message)}};return(0,T.jsx)("form",{className:"d-flex flex-column g-20",onSubmit:ee((e=>{})),children:(0,T.jsx)(r.A,{className:"card d-flex flex-column card-padded",children:(0,T.jsxs)("div",{className:"d-flex flex-column justify-content-between flex-1",children:[(0,T.jsx)(u.A,{style:{width:"100%",backgroundColor:"#FDCA40",color:"black",justifyContent:"center"},children:(0,T.jsx)("h3",{style:{paddingTop:"10px",marginLeft:"250px",color:"black"},children:"Payment with GSCoin"})}),(0,T.jsx)("br",{}),1===xe&&(0,T.jsxs)("div",{children:[(0,T.jsxs)("label",{children:["User Name",(0,T.jsx)("input",{className:p()("field text-700"),type:"text",placeholder:"Name",disabled:!0,value:V.fullname,onChange:e=>K(e.target.value)})]}),(0,T.jsxs)("label",{children:["User Email",(0,T.jsx)("input",{className:p()("field text-700"),type:"text",placeholder:"Name",disabled:!0,value:V.email,onChange:e=>K(e.target.value)})]}),(0,T.jsx)("br",{}),(0,T.jsx)("hr",{style:{margin:"20px 0"}}),e?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("label",{children:["Tournament Title:",(0,T.jsx)("input",{className:p()("field text-700"),type:"text",value:s,readOnly:!0})]}),(0,T.jsxs)("label",{children:["Tournament Start Data:",(0,T.jsx)("input",{className:p()("field text-700"),type:"text",value:J&&"".concat(J.day,"/").concat(J.month,"/").concat(J.year),readOnly:!0})]}),(0,T.jsxs)("label",{children:["Tournament End Data:",(0,T.jsx)("input",{className:p()("field text-700"),type:"text",value:X&&"".concat(X.day,"/").concat(X.month,"/").concat(X.year),readOnly:!0})]}),(0,T.jsxs)("label",{children:["Tournament Duration:",(0,T.jsx)("input",{className:p()("field text-700"),type:"text",value:F,readOnly:!0})]}),(0,T.jsx)("button",{className:"btn",type:"button",style:{marginLeft:"150px",width:"60%",backgroundColor:"red",color:"white"},onClick:()=>{t(""),n(""),U(0),W(0),M(0),z(0),G(0),B(0),Q(null),$(null),R(0),we(!1)},children:"Cancel Selection"}),(0,T.jsx)("hr",{style:{margin:"20px 0"}})]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("label",{children:["Tournament Title:",(0,T.jsx)(c.A,{className:"custom-select",options:(a||[]).map((e=>({label:e.title,value:e._id}))),value:{label:e,value:e},onChange:e=>{(e=>{t(e);const s=a.find((t=>t._id===e));if(s){n(s.title),U(s.startDay),W(s.startMonth),M(s.startYear),z(s.endDay),G(s.endMonth),B(s.endYear);const e=new Date(s.startYear,s.startMonth-1,s.startDay),t=new Date(s.endYear,s.endMonth-1,s.endDay);Q({day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}),$({day:t.getDate(),month:t.getMonth()+1,year:t.getFullYear()});const a=Math.ceil((t-e)/864e5);R(a)}})(e.value),we(!0)}})]}),ke?null:(0,T.jsx)("p",{style:{color:"red",marginLeft:"10px"},children:"Please select a tournament."})]})]}),2===xe&&(0,T.jsxs)("div",{children:[(0,T.jsxs)("label",{children:["User Address Wallet",(0,T.jsx)("input",{className:p()("field text-700"),type:"text",placeholder:"AddressWallet",disabled:!0,value:V.addressWallet})]}),(0,T.jsxs)("div",{style:{marginBottom:"20px",textAlign:"center"},className:"transaction-screenshot",children:[!le&&(0,T.jsxs)("label",{htmlFor:"transaction-image",style:{display:"block",marginBottom:"10px",fontSize:"14px",fontWeight:"bold"},className:"transaction-screenshot-label",children:[(0,T.jsxs)("p",{style:{display:"block",margin:"10px auto",padding:"8px 12px",backgroundColor:"#FDCA40",color:"black",border:"none",borderRadius:"9px",cursor:"pointer"},children:["Upload Screenshot for Your Transaction",(0,T.jsx)("input",{id:"transaction-image",style:{display:"none"},className:"transaction-screenshot-input",type:"file",onChange:async e=>{const t=e.target.files[0];t?(ce(URL.createObjectURL(t)),he(!1),i.oR.success("Image uploaded successfully!")):(ce(null),he(!0)),b().recognize(t,"eng",{logger:e=>console.log(e)}).then((e=>{let{data:{text:t}}=e;console.log("Extracted Text:",t);const{senderAddress:s,receiverAddress:n,transactionAmount:a}=(e=>{const t=/From\s(Ox[a-fA-F0-9]{8}\.\.\.[a-fA-F0-9]{9})/g.exec(e),s=/To\s(0x[a-fA-F0-9]{8}\.\.\.[a-fA-F0-9]{8})/g.exec(e),n=t&&t.length>1?t[1]:"",a=s&&s.length>1?s[1]:"",o=e.match(/For\s(\d+)\s\(/);return{senderAddress:n,receiverAddress:a,transactionAmount:o?o[1]:""}})(t);console.log("Sender Address:",s),console.log("USER Address:",V.addressWallet),console.log("admin Address:",te),console.log("Receiver Address:",n),console.log("Transaction Amount:",a),ae(s),de(a);const o="O"+V.addressWallet.slice(1);console.log("modified Address :",o),n===te&&s===o?(console.log("match",oe),re(!0),console.log("matchhh",oe)):(re(!1),console.log("match no  ",oe))})).catch((e=>{console.error("Error during OCR:",e)}))}})]}),(0,T.jsx)(j.KLY,{style:{width:"5%",height:"5%",margin:"0 auto"}})]}),!ue&&(0,T.jsxs)("div",{style:{border:"2px solid #ccc",borderRadius:"8px",overflow:"hidden",width:"100%",maxWidth:"700px",margin:"0 auto"},className:"transaction-screenshot-preview",children:[(0,T.jsx)("img",{src:le,alt:"Transaction Screenshot",style:{display:"block",width:"100%",height:"auto"},className:"transaction-screenshot-image"}),(0,T.jsx)("button",{style:{display:"block",margin:"10px auto",padding:"8px 16px",backgroundColor:"#FDCA40",color:"black",border:"none",borderRadius:"5px",cursor:"pointer"},onClick:()=>ce(null),children:"Remove Image"})]})]}),!ue&&(0,T.jsx)("div",{children:oe?(0,T.jsxs)("b",{className:pe?"animate-fade":"",style:{marginLeft:"180px",paddingTop:"30px",color:"green"},children:["User and Admin wallet addresses match! ",(0,T.jsx)(g.A7C,{style:{color:"green"}})]}):(0,T.jsxs)("b",{style:{marginLeft:"180px",paddingTop:"30px",color:"red"},children:["User and Admin wallet addresses do not match! ",(0,T.jsx)(g._Hm,{style:{color:"red"}})]})}),(0,T.jsxs)("label",{children:["Amount with GSC",(0,T.jsx)("input",{className:p()("field text-700"),type:"text",placeholder:"Amount",disabled:!0,value:ie,onChange:e=>de(e.target.value)})]})]}),(0,T.jsx)("br",{}),1===xe&&(0,T.jsx)("button",{className:"btn",type:"button",style:{marginLeft:"150px",width:"60%",backgroundColor:"#FDCA40",color:"black"},onClick:()=>{return t=je,void(e?(De({...t,tournamentId:e}),Ue()):i.oR.error("Please select a tournament before proceeding."));var t},children:"Next"}),(0,T.jsx)("br",{}),(0,T.jsx)("br",{}),(0,T.jsx)("button",{className:"btn",type:"button",style:{width:"100%",backgroundColor:"transparent",color:"white"},onClick:()=>Ee(!0),children:(0,T.jsx)("u",{children:"View the Terms & Conditions before completing your payment with GSCoin or Stripe."})}),(0,T.jsxs)(C.A,{open:Re,onClose:()=>Ee(!1),children:[(0,T.jsx)(k.A,{children:"Terms & Conditions"}),(0,T.jsxs)(w.A,{children:[(0,T.jsx)("div",{style:{marginLeft:"20%",marginBottom:"5%",width:"100%",fontWeight:"bold",fontSize:"20px",color:"red"},children:(0,T.jsx)("b",{children:"Here are the terms and conditions"})}),(0,T.jsxs)("ul",{children:[(0,T.jsxs)("li",{children:[" ",(0,T.jsx)("b",{style:{fontWeight:"bold",fontSize:"14px",color:"blue"},children:"Term 1 :"}),"  Every tournament has a different amount. If your tournament is a ",(0,T.jsx)("b",{children:"league"}),", you must pay ",(0,T.jsx)("b",{children:"50 TND"}),". If your tournament is a ",(0,T.jsx)("b",{children:"knockout"}),", you should pay  ",(0,T.jsx)("b",{children:"30 TND."})," If the tournament is a ",(0,T.jsx)("b",{children:"Championship,"})," you need to pay ",(0,T.jsx)("b",{children:"40 TND"}),"."]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("b",{style:{fontWeight:"bold",fontSize:"14px",color:"blue"},children:"Term 2 :"}),"  The amount may vary depending on the duration of the tournament. ",(0,T.jsx)("b",{children:"The first two days are free"}),", and after these two days, each additional ",(0,T.jsx)("b",{children:"day costs 2 TND"}),". ",(0,T.jsx)("u",{children:"For example, if the tournament duration is 6 days, the amount would be ((6-2) * 2)."})]}),(0,T.jsxs)("li",{children:[(0,T.jsx)("b",{style:{fontWeight:"bold",fontSize:"14px",color:"blue"},children:"Term 3 :"}),"    If you want to pay with Coin, ",(0,T.jsx)("br",{}),(0,T.jsx)("b",{children:"I - "}),"  first go to this link ",(0,T.jsx)("a",{style:{fontWeight:"bold",fontSize:"13px",color:"green"},href:"https://garksportscoin.netlify.app/",target:"_blank",rel:"noopener noreferrer",children:"https://garksportscoin.netlify.app/"})," . ",(0,T.jsx)("br",{}),(0,T.jsx)("b",{children:"II - "}),"  connect with your Metamask wallet. ",(0,T.jsx)("br",{}),(0,T.jsx)("b",{children:" III -"})," Navigate to the 'Send Token' section and ensure you send the token to this wallet address: ",(0,T.jsx)("b",{style:{color:"green"},children:"0x83d9C5d7DfD1D2f5BeD9aDb3bf187e52F4D914DF"}),".",(0,T.jsx)("br",{}),(0,T.jsx)("b",{children:(0,T.jsx)("u",{children:"If you don't have the token, you can buy a Coin or pay with Stripe."})}),(0,T.jsx)("br",{}),(0,T.jsx)("b",{children:" IV -"})," After successfully completing your transaction with Coin, you should go to ",(0,T.jsx)("a",{style:{fontWeight:"bold",fontSize:"13px",color:"green"},href:"https://bscscan.com/",target:"_blank",rel:"noopener noreferrer",children:"https://bscscan.com/"})," ",(0,T.jsx)("br",{}),(0,T.jsx)("b",{children:" V -"})," Take a screenshot of your payment transaction.",(0,T.jsx)("br",{}),(0,T.jsx)("img",{src:N,alt:"Transaction Screenshot",style:{display:"block",width:"100%",border:"2px solid black",height:"auto"},className:"transaction-screenshot-image"}),(0,T.jsx)("b",{children:"VI -"}),"  Once you've done that, you can continue with your payment like this one.",(0,T.jsx)("br",{}),(0,T.jsx)("br",{}),(0,T.jsxs)("p",{children:["Every tournament has a different amount in GSC: ",(0,T.jsx)("br",{}),"** If your tournament is a ",(0,T.jsx)("b",{children:"league"}),", you must pay ",(0,T.jsx)("b",{children:"6 GSC"}),".",(0,T.jsx)("br",{}),"** If your tournament is a ",(0,T.jsx)("b",{children:"knockout"}),", you should pay  ",(0,T.jsx)("b",{children:"19 GSC."}),(0,T.jsx)("br",{}),"** If the tournament is a ",(0,T.jsx)("b",{children:"Championship,"})," you need to pay ",(0,T.jsx)("b",{children:"5 GSC"})]}),(0,T.jsx)("p",{style:{fontSize:"11px",color:"blue"},children:"The amount does not depend on the duration of the tournament when paying with GSCoin."}),(0,T.jsx)("br",{}),(0,T.jsx)("p",{children:(0,T.jsxs)("u",{children:["If you need any support, you can contact us ",(0,T.jsx)("a",{href:"https://gmail.com/",children:(0,T.jsx)("b",{children:"LinkUpTournament@gmail.com"})})," "]})}),(0,T.jsx)("br",{})]})]})]}),(0,T.jsx)(A.A,{children:(0,T.jsx)(v.A,{style:{width:"100%",backgroundColor:"green",color:"white"},onClick:()=>Ee(!1),children:"CONFIRM"})})]}),(0,T.jsx)("br",{}),(0,T.jsx)("br",{}),2===xe&&(0,T.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"},children:[(0,T.jsxs)("button",{className:"btn",type:"button",style:{marginRight:"10px",width:"30%",backgroundColor:"#FDCA40",color:"black"},onClick:()=>{me(xe-1)},children:[(0,T.jsx)(S.yCO,{style:{width:"11%",height:"100%"}}),"Back"]}),(0,T.jsx)("button",{className:"btn",type:"submit",style:{marginLeft:"10px",width:"30%",backgroundColor:"#FDCA40",color:"black"},onClick:()=>(Fe(Se),void Le()),disabled:ue||!ie,children:"Confirmation"})]})]})})})},I=()=>{const e={settings:(0,T.jsx)(D,{})};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(n.A,{title:"Payment with Coin"}),(0,T.jsx)("br",{}),(0,T.jsx)(a.A,{id:"settings",widgets:e})]})}},26788:(e,t,s)=>{e.exports=s.p+"static/media/transactionimage.8695e9aebfa87636ecc6.png"}}]);
//# sourceMappingURL=5457.ce07d0f9.chunk.js.map